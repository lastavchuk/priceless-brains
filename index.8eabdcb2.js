!function(){function n(n){return n&&n.__esModule?n.default:n}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},a=e.parcelRequirea192;null==a&&((a=function(n){if(n in t)return t[n].exports;if(n in o){var e=o[n];delete o[n];var a={id:n,exports:{}};return t[n]=a,e.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(n,e){o[n]=e},e.parcelRequirea192=a),a("iE7OH").register(JSON.parse('{"9p9yL":"index.8eabdcb2.js","kxKJ3":"symbol-defs.70d0135e.svg","fkaUk":"shopping-list.25daefe6.js"}')),a("ekC86"),a("9hn33");var r=a("bpxeT"),c=a("2TvXO");function i(n){n.classList.remove("is-hidden"),document.body.style.overflow="hidden"}function s(n){document.body.style.overflow="",n.classList.add("is-hidden")}var l=a("jZ32G"),u=a("6JpON"),d=document.querySelector(".js-loader");function p(){return(p=n(r)(n(c).mark((function e(){return n(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.fetchAllCategory)().then((function(n){var e=n.filter((function(n,e,t){return t.findIndex((function(e){return e.list_name===n.list_name}))===e})).map((function(n){return'<li class="item" data-name="'.concat(n.list_name,'">').concat(n.list_name,"</li>")})).sort().join("");m.insertAdjacentHTML("beforeend",e)})).catch((function(e){return n(u).Notify.failure(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}i(d),function(){p.apply(this,arguments)}();var m=document.querySelector(".category-list"),f=document.querySelector(".category-name"),v=document.querySelector(".book-list");function h(n){if("allBooks"===f.textContent)S(n),i(d);else{var e=n.map((function(n){return'\n          <li class="category-book-card" data-id="'.concat(n._id,'">\n          <div class="image-overlay"> \n            <img class="book-image" src="').concat(n.book_image,'" alt="').concat(n.title,'" loading="lazy" width="" />\n            <div class="pop-up-window">\n                <p class="pop-up-text">quick view</p>\n              </div></div>\n            <h3 class="book-name">').concat(B(n.title,17),'</h3>\n            <p class="author-book">').concat(B(n.author,21),"</p>\n          </li>\n        ")})).join("");v.innerHTML=e}}function g(n){var e=n.target.dataset.name;if(e){var t=m.querySelector(".category-active"),o=m.querySelector("[data-name='".concat(e,"']"));if(t&&t.classList.remove("category-active"),o.classList.add("category-active"),"allBooks"===e)return L(),void(f.innerHTML=y("Best Seller Books"));!function(n){k.apply(this,arguments)}(e),f.innerHTML=y(e)}}function y(n){var e=n.split(" "),t=e.pop();return e.join(" ")+' <span class="title-blue">'+t+"</span>"}function k(){return(k=n(r)(n(c).mark((function e(t){return n(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=h,e.next=4,(0,l.fetchCategory)(t);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),n(u).Notify.failure("Oops! Something went wrong. You caught the following error: ".concat(e.t2.message,"."));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function b(){return w.apply(this,arguments)}function w(){return(w=n(r)(n(c).mark((function e(){return n(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.fetchBestBooks)();case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),n(u).Notify.failure("Oops! Something went wrong. You caught the following error: ".concat(e.t0.message,"."));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function L(){return x.apply(this,arguments)}function x(){return(x=n(r)(n(c).mark((function e(){return n(c).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b();case 2:S(n.sent),s(d);case 5:case"end":return n.stop()}}),e)})))).apply(this,arguments)}function S(n){var e=n.map((function(n){var e=n.books.map((function(n){return'\n              <li class="book-card" data-id="'.concat(n._id,'">\n              <div class="image-overlay"> \n              <img class="book-image" src="').concat(n.book_image,'" alt="').concat(n.title,'" loading="lazy" />\n                <div class="pop-up-window">\n                  <p class="pop-up-text">quick view</p>\n                </div>\n              </div> \n                <h3 class="book-name">').concat(B(n.title,21),'</h3>\n                <p class="book-author">').concat(n.author,"</p>\n              </li>\n            ")})).join("");return'\n        <li class="books-allcat">\n          <h2 class="category-item">'.concat(n.list_name,'</h2>\n          <ul class="categories">\n            ').concat(e,'\n          </ul>\n          <button class="see-more-btn" data-name="').concat(n.list_name,'">See More</button>\n        </li>\n        \n      ')})).join("");v.innerHTML=e}function B(n,e){return n.length>e?n.slice(0,n.lastIndexOf(" ",e))+"...":n}m.addEventListener("click",g),L(),v.addEventListener("click",g),a("xpKCW");var _;r=a("bpxeT"),c=a("2TvXO"),l=a("jZ32G");_=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("kxKJ3");u=a("6JpON");var E,j={modalBtnClose:document.querySelector("[data-modal-close]"),modalBtn:document.querySelector(".modal-btn"),modalBackDrop:document.querySelector("[data-modal]"),modal:document.querySelector(".modal-book"),congrat:document.querySelector(".congratulations"),cardList:document.querySelector(".book-list"),seeMoreBtn:document.querySelector(".see-more-btn")},q="books";function T(n){n.target===n.currentTarget&&N()}function O(n){"Escape"===n.key&&N()}function H(){document.body.classList.add("stop-scrolling"),j.modalBackDrop.classList.remove("modal-is-hidden"),j.modalBackDrop.addEventListener("click",T),window.addEventListener("keydown",O)}function N(){document.body.classList.remove("stop-scrolling"),j.modalBackDrop.classList.add("modal-is-hidden"),window.removeEventListener("keydown",O),j.modalBackDrop.removeEventListener("click",T)}function M(){return(M=n(r)(n(c).mark((function e(t){var o;return n(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.fetchBook)(t);case 3:return o=e.sent,j.modal.innerHTML=I(o),H(),e.abrupt("return",o);case 9:e.prev=9,e.t0=e.catch(0),n(u).Notify.failure("Oops! Something went wrong. You caught the following error: ".concat(e.t0.message,"."));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function C(n,e){localStorage.setItem(n,JSON.stringify(e))}function D(n){return JSON.parse(localStorage.getItem(n))}function J(n){if(n.target.classList.contains("js-btn-add"))return function(n){var e=D(q)||[];if(!e.some((function(e){return e===n})))e.push(n),C(q,e)}(E),void z()}function A(n){if(n.target.classList.contains("js-btn-remove"))return(e=D(q)).splice(e.findIndex((function(n){return n===E})),1),localStorage.removeItem(q),C(q,e),void R();var e}function R(n){j.modalBtn.addEventListener("click",J),j.modalBtn.removeEventListener("click",A),j.modalBtn.textContent="add to shopping list",j.congrat.classList.add("visually-hidden"),j.modalBtn.classList.replace("js-btn-remove","js-btn-add")}function z(n){j.modalBtn.removeEventListener("click",J),j.modalBtn.addEventListener("click",A),j.modalBtn.textContent="remove from the shopping list",j.congrat.classList.remove("visually-hidden"),j.modalBtn.classList.replace("js-btn-add","js-btn-remove")}function I(e){var t=e.book_image,o=e.buy_links,a=e.title,r=e.description,c=e.author,i='<div class="thumb">\n    <img class="book-img" src="'.concat(t,'" alt="').concat(a,'" loading="lazy"/>\n</div>\n<div class="modal-book-info">\n    <h3 class="name">').concat(a,'</h3>\n    <h4 class="author">').concat(c,'</h4>\n    <p class="descr">').concat(r||"Sorry! This book has no description",'</p>\n    <ul class="modal-list">');return i+=o.map((function(e){var t=e.name,o=e.url;return"Amazon"===t?'<li class="modal-item">\n            <a\n                aria-label="'.concat(t,'"\n                class="modal-buy-link"\n                href="').concat(o,'"\n                rel="noopener noreferrer"\n                target="_blank"\n            >\n            <svg class="modal-buy-svg" width="32px" height="32px">\n            <use href="').concat(n(_),'#icon-amazon"></use>\n        </svg>\n\n            </a>\n        </li>'):"Apple Books"===t?'<li class="modal-item">\n            <a\n                aria-label="'.concat(t,'"\n                class="modal-buy-link"\n                href="').concat(o,'"\n                rel="noopener noreferrer"\n                target="_blank"\n            >\n            <svg class="modal-buy-svg" width="32px" height="32px">\n            <use href="').concat(n(_),'#icon-apple"></use>\n        </svg>\n\n            </a>\n        </li>'):"Bookshop"===t?'<li class="modal-item">\n            <a\n                aria-label="'.concat(t,'"\n                class="modal-buy-link"\n                href="').concat(o,'"\n                rel="noopener noreferrer"\n                target="_blank"\n            >\n            <svg class="modal-buy-svg" width="32px" height="32px">\n            <use href="').concat(n(_),'#icon-books"></use>\n        </svg>\n\n            </a>\n        </li>'):void(i+="</ul>")})).join("")}j.modalBtn.addEventListener("click",J),j.cardList.addEventListener("click",(function(n){if(n.target===n.currentTarget||j.seeMoreBtn)return;j.modal.innerHTML="",function(n){if((D(q)||[]).some((function(e){return e===n})))return void z();R()}((e=n.target,E=e.closest("li").dataset.id)),function(n){M.apply(this,arguments)}(E);var e})),j.modalBtnClose.addEventListener("click",N),a("euqRf"),a("fYPNS"),a("7hKzD"),a("6gLS1")}();
//# sourceMappingURL=index.8eabdcb2.js.map
