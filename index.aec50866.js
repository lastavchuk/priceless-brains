function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},t={},a=n.parcelRequirea192;function s(e){e.classList.remove("is-hidden"),document.body.style.overflow="hidden"}null==a&&((a=function(e){if(e in o)return o[e].exports;if(e in t){var n=t[e];delete t[e];var a={id:e,exports:{}};return o[e]=a,n.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,n){t[e]=n},n.parcelRequirea192=a),a("kyEFX").register(JSON.parse('{"7bk21":"index.aec50866.js","9v6fF":"symbol-defs.70d0135e.svg","iLOJF":"shopping-list.8dafb84a.js"}')),a("8BGGW"),a("eHzQI");var i=a("kafPQ"),l=a("7Y9D8");const r=document.querySelector(".js-loader");s(r),async function(){await(0,i.fetchAllCategory)().then((e=>{const n=e.filter(((e,n,o)=>o.findIndex((n=>n.list_name===e.list_name))===n)).map((e=>`<li class="item" data-name="${e.list_name}">${e.list_name}</li>`)).sort().join("");c.insertAdjacentHTML("beforeend",n)})).catch((n=>e(l).Notify.failure(n)))}();const c=document.querySelector(".category-list"),d=document.querySelector(".category-name"),u=document.querySelector(".book-list");function m(n){const o=n.target.dataset.name;if(!o)return;const t=c.querySelector(".category-active"),a=c.querySelector(`[data-name='${o}']`);if(t&&t.classList.remove("category-active"),a.classList.add("category-active"),"allBooks"===o)return g(),void(d.innerHTML=f("Best Seller Books"));!async function(n){try{!function(e){if("allBooks"===d.textContent)p(e),s(r);else{const n=e.map((e=>`\n          <li class="category-book-card" data-id="${e._id}">\n          <div class="image-overlay"> \n            <img class="book-image" src="${e.book_image}" alt="${e.title}" loading="lazy" width="" />\n            <div class="pop-up-window">\n                <p class="pop-up-text">quick view</p>\n              </div></div>\n            <h3 class="book-name">${v(e.title,17)}</h3>\n            <p class="author-book">${v(e.author,21)}</p>\n          </li>\n        `)).join("");u.innerHTML=n}}(await(0,i.fetchCategory)(n))}catch(n){e(l).Notify.failure(`Oops! Something went wrong. You caught the following error: ${n.message}.`)}}(o),d.innerHTML=f(o)}function f(e){const n=e.split(" "),o=n.pop();return n.join(" ")+' <span class="title-blue">'+o+"</span>"}async function g(){var n;p(await async function(){try{return await(0,i.fetchBestBooks)()}catch(n){e(l).Notify.failure(`Oops! Something went wrong. You caught the following error: ${n.message}.`)}}()),n=r,document.body.style.overflow="",n.classList.add("is-hidden")}function p(e){const n=e.map((e=>{const n=e.books.map((e=>`\n              <li class="book-card" data-id="${e._id}">\n              <div class="image-overlay"> \n              <img class="book-image" src="${e.book_image}" alt="${e.title}" loading="lazy" />\n                <div class="pop-up-window">\n                  <p class="pop-up-text">quick view</p>\n                </div>\n              </div> \n                <h3 class="book-name">${v(e.title,21)}</h3>\n                <p class="book-author">${e.author}</p>\n              </li>\n            `)).join("");return`\n        <li class="books-allcat">\n          <h2 class="category-item">${e.list_name}</h2>\n          <ul class="categories">\n            ${n}\n          </ul>\n          <button class="see-more-btn" data-name="${e.list_name}">See More</button>\n        </li>\n        \n      `})).join("");u.innerHTML=n}function v(e,n){return e.length>n?e.slice(0,e.lastIndexOf(" ",n))+"...":e}c.addEventListener("click",m),g(),u.addEventListener("click",m),a("dTazW");var h;i=a("kafPQ");h=new URL(a("kyEFX").resolve("9v6fF"),import.meta.url).toString();l=a("7Y9D8");const b={modalBtnClose:document.querySelector("[data-modal-close]"),modalBtn:document.querySelector(".modal-btn"),modalBackDrop:document.querySelector("[data-modal]"),modal:document.querySelector(".modal-book"),congrat:document.querySelector(".congratulations"),cardList:document.querySelector(".book-list"),seeMoreBtn:document.querySelector(".see-more-btn")};let k;function y(e){e.target===e.currentTarget&&L()}function w(e){"Escape"===e.key&&L()}function L(){document.body.classList.remove("stop-scrolling"),b.modalBackDrop.classList.add("modal-is-hidden"),window.removeEventListener("keydown",w),b.modalBackDrop.removeEventListener("click",y)}function $(e,n){localStorage.setItem(e,JSON.stringify(n))}function B(e){return JSON.parse(localStorage.getItem(e))}function S(e){if(e.target.classList.contains("js-btn-add"))return function(e){const n=B("books")||[];if(!n.some((n=>n===e)))n.push(e),$("books",n)}(k),void E()}function _(e){if(e.target.classList.contains("js-btn-remove"))return function(){const e=B("books");e.splice(e.findIndex((e=>e===k)),1),localStorage.removeItem("books"),$("books",e)}(),void x()}function x(e){b.modalBtn.addEventListener("click",S),b.modalBtn.removeEventListener("click",_),b.modalBtn.textContent="add to shopping list",b.congrat.classList.add("visually-hidden"),b.modalBtn.classList.replace("js-btn-remove","js-btn-add")}function E(e){b.modalBtn.removeEventListener("click",S),b.modalBtn.addEventListener("click",_),b.modalBtn.textContent="remove from the shopping list",b.congrat.classList.remove("visually-hidden"),b.modalBtn.classList.replace("js-btn-add","js-btn-remove")}b.modalBtn.addEventListener("click",S),b.cardList.addEventListener("click",(function(n){if(n.target===n.currentTarget||b.seeMoreBtn)return;b.modal.innerHTML="",o=n.target,k=o.closest("li").dataset.id,function(e){const n=B("books")||[];if(n.some((n=>n===e)))return void E();x()}(k),async function(n){try{const o=await(0,i.fetchBook)(n);b.modal.innerHTML=function(n){const{book_image:o,buy_links:t,title:a,description:s,author:i}=n;let l=`<div class="thumb">\n    <img class="book-img" src="${o}" alt="${a}" loading="lazy"/>\n</div>\n<div class="modal-book-info">\n    <h3 class="name">${a}</h3>\n    <h4 class="author">${i}</h4>\n    <p class="descr">${s||"Sorry! This book has no description"}</p>\n    <ul class="modal-list">`;return l+=t.map((({name:n,url:o})=>"Amazon"===n?`<li class="modal-item">\n            <a\n                aria-label="${n}"\n                class="modal-buy-link"\n                href="${o}"\n                rel="noopener noreferrer"\n                target="_blank"\n            >\n            <svg class="modal-buy-svg" width="32px" height="32px">\n            <use href="${e(h)}#icon-amazon"></use>\n        </svg>\n\n            </a>\n        </li>`:"Apple Books"===n?`<li class="modal-item">\n            <a\n                aria-label="${n}"\n                class="modal-buy-link"\n                href="${o}"\n                rel="noopener noreferrer"\n                target="_blank"\n            >\n            <svg class="modal-buy-svg" width="32px" height="32px">\n            <use href="${e(h)}#icon-apple"></use>\n        </svg>\n\n            </a>\n        </li>`:"Bookshop"===n?`<li class="modal-item">\n            <a\n                aria-label="${n}"\n                class="modal-buy-link"\n                href="${o}"\n                rel="noopener noreferrer"\n                target="_blank"\n            >\n            <svg class="modal-buy-svg" width="32px" height="32px">\n            <use href="${e(h)}#icon-books"></use>\n        </svg>\n\n            </a>\n        </li>`:void(l+="</ul>"))).join(""),l}(o),document.body.classList.add("stop-scrolling"),b.modalBackDrop.classList.remove("modal-is-hidden"),b.modalBackDrop.addEventListener("click",y),window.addEventListener("keydown",w)}catch(n){e(l).Notify.failure(`Oops! Something went wrong. You caught the following error: ${n.message}.`)}}(k);var o})),b.modalBtnClose.addEventListener("click",L),a("bMZn5"),a("eeP4j"),a("epHO8"),a("8x1JJ");
//# sourceMappingURL=index.aec50866.js.map
